{
    "sourceFile": "frontend/src/components/payment.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1754816982164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754818084992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import React, { useState } from 'react';\r\n import axios from 'axios';\r\n \r\n-const PaymentForm = () => {\r\n+const Payment = () => {\r\n   const [formData, setFormData] = useState({\r\n     name: '',\r\n     cardNumber: '',\r\n     expiry: '',\r\n@@ -128,5 +128,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default PaymentForm;\n\\ No newline at end of file\n+export default Payment;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1754818529351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,9 +113,9 @@\n             type=\"number\"\r\n             name=\"amount\"\r\n             value={formData.amount}\r\n             onChange={handleChange}\r\n-            placeholder=\"100.00\"\r\n+            placeholder=\"200.00\"\r\n             min=\"1\"\r\n             step=\"0.01\"\r\n             required\r\n           />\r\n"
                },
                {
                    "date": 1754818693426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,16 +27,12 @@\n     setError('');\r\n     setSuccess('');\r\n \r\n     try {\r\n-      // Send payment data to your backend\r\n       const response = await axios.post('http://your-backend-api/payfast/initiate', {\r\n         amount: formData.amount,\r\n         customer_name: formData.name,\r\n-        // Other necessary fields for PayFast\r\n       });\r\n-\r\n-      // Redirect to PayFast payment page\r\n       window.location.href = response.data.paymentUrl;\r\n     } catch (err) {\r\n       setError(err.response?.data?.message || 'Payment failed. Please try again.');\r\n     } finally {\r\n@@ -61,8 +57,9 @@\n             value={formData.name}\r\n             onChange={handleChange}\r\n             placeholder=\"John Doe\"\r\n             required\r\n+            title=\"Enter the name as it appears on your card\"\r\n           />\r\n         </div>\r\n \r\n         <div className=\"label\">\r\n@@ -74,8 +71,9 @@\n             value={formData.cardNumber}\r\n             onChange={handleChange}\r\n             placeholder=\"1234 5678 9012 3456\"\r\n             required\r\n+            title=\"Enter your 16-digit card number without spaces\"\r\n           />\r\n         </div>\r\n \r\n         <div className=\"split\">\r\n@@ -88,8 +86,9 @@\n               value={formData.expiry}\r\n               onChange={handleChange}\r\n               placeholder=\"MM/YY\"\r\n               required\r\n+              title=\"Enter expiration date in MM/YY format (e.g., 12/25)\"\r\n             />\r\n           </div>\r\n \r\n           <div className=\"label\">\r\n@@ -101,8 +100,9 @@\n               value={formData.cvv}\r\n               onChange={handleChange}\r\n               placeholder=\"123\"\r\n               required\r\n+              title=\"Enter the 3-digit security code on the back of your card\"\r\n             />\r\n           </div>\r\n         </div>\r\n \r\n@@ -117,8 +117,9 @@\n             placeholder=\"200.00\"\r\n             min=\"1\"\r\n             step=\"0.01\"\r\n             required\r\n+            title=\"R200 is the minimum payment amount\"\r\n           />\r\n         </div>\r\n \r\n         <button className=\"checkout-btn\" type=\"submit\" disabled={loading}>\r\n"
                },
                {
                    "date": 1754818750659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n             type=\"text\"\r\n             name=\"name\"\r\n             value={formData.name}\r\n             onChange={handleChange}\r\n-            placeholder=\"John Doe\"\r\n+            placeholder=\"\"\r\n             required\r\n             title=\"Enter the name as it appears on your card\"\r\n           />\r\n         </div>\r\n@@ -69,9 +69,9 @@\n             type=\"text\"\r\n             name=\"cardNumber\"\r\n             value={formData.cardNumber}\r\n             onChange={handleChange}\r\n-            placeholder=\"1234 5678 9012 3456\"\r\n+            placeholder=\"\"\r\n             required\r\n             title=\"Enter your 16-digit card number without spaces\"\r\n           />\r\n         </div>\r\n@@ -98,9 +98,9 @@\n               type=\"text\"\r\n               name=\"cvv\"\r\n               value={formData.cvv}\r\n               onChange={handleChange}\r\n-              placeholder=\"123\"\r\n+              placeholder=\"\"\r\n               required\r\n               title=\"Enter the 3-digit security code on the back of your card\"\r\n             />\r\n           </div>\r\n@@ -113,9 +113,9 @@\n             type=\"number\"\r\n             name=\"amount\"\r\n             value={formData.amount}\r\n             onChange={handleChange}\r\n-            placeholder=\"200.00\"\r\n+            placeholder=\"\"\r\n             min=\"1\"\r\n             step=\"0.01\"\r\n             required\r\n             title=\"R200 is the minimum payment amount\"\r\n"
                },
                {
                    "date": 1754818896337,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,19 +11,37 @@\n   });\r\n   const [loading, setLoading] = useState(false);\r\n   const [error, setError] = useState('');\r\n   const [success, setSuccess] = useState('');\r\n+  const [amountError, setAmountError] = useState('');\r\n \r\n   const handleChange = (e) => {\r\n     const { name, value } = e.target;\r\n+    \r\n+    if (name === 'amount') {\r\n+      const amountValue = parseFloat(value);\r\n+      if (amountValue < 200) {\r\n+        setAmountError('Minimum payment amount is R200');\r\n+      } else {\r\n+        setAmountError('');\r\n+      }\r\n+    }\r\n+    \r\n     setFormData(prev => ({\r\n       ...prev,\r\n       [name]: value\r\n     }));\r\n   };\r\n \r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n+    \r\n+    // Validate amount before submission\r\n+    if (parseFloat(formData.amount) < 200) {\r\n+      setAmountError('Minimum payment amount is R200');\r\n+      return;\r\n+    }\r\n+    \r\n     setLoading(true);\r\n     setError('');\r\n     setSuccess('');\r\n \r\n@@ -114,16 +132,33 @@\n             name=\"amount\"\r\n             value={formData.amount}\r\n             onChange={handleChange}\r\n             placeholder=\"\"\r\n-            min=\"1\"\r\n+            min=\"200\"\r\n             step=\"0.01\"\r\n             required\r\n-            title=\"R200 is the minimum payment amount\"\r\n+            title=\"Minimum payment amount is R200\"\r\n           />\r\n+          {amountError && (\r\n+            <div style={{ \r\n+              color: '#ff6b6b', \r\n+              fontSize: '12px', \r\n+              marginTop: '5px'\r\n+            }}>\r\n+              {amountError}\r\n+            </div>\r\n+          )}\r\n         </div>\r\n \r\n-        <button className=\"checkout-btn\" type=\"submit\" disabled={loading}>\r\n+        <button \r\n+          className=\"checkout-btn\" \r\n+          type=\"submit\" \r\n+          disabled={loading || amountError}\r\n+          style={{\r\n+            opacity: amountError ? 0.7 : 1,\r\n+            cursor: amountError ? 'not-allowed' : 'pointer'\r\n+          }}\r\n+        >\r\n           {loading ? 'Processing...' : 'Pay via PayFast'}\r\n         </button>\r\n       </form>\r\n     </div>\r\n"
                },
                {
                    "date": 1754818927081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n             title=\"Minimum payment amount is R200\"\r\n           />\r\n           {amountError && (\r\n             <div style={{ \r\n-              color: '#ff6b6b', \r\n+              color: '#02ddffff', \r\n               fontSize: '12px', \r\n               marginTop: '5px'\r\n             }}>\r\n               {amountError}\r\n"
                },
                {
                    "date": 1754821033343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n \r\n const Payment = () => {\r\n   const [formData, setFormData] = useState({\r\n     name: '',\r\n+    email: '', // Added email field for PayFast\r\n     cardNumber: '',\r\n     expiry: '',\r\n     cvv: '',\r\n     amount: ''\r\n@@ -45,15 +46,19 @@\n     setError('');\r\n     setSuccess('');\r\n \r\n     try {\r\n-      const response = await axios.post('http://your-backend-api/payfast/initiate', {\r\n+      const response = await axios.post('http://localhost:5000/api/payment/init-payment', {\r\n         amount: formData.amount,\r\n-        customer_name: formData.name,\r\n+        name: formData.name,\r\n+        email: formData.email || 'customer@example.com' // Default email if not provided\r\n       });\r\n+\r\n+      // Redirect to PayFast payment page\r\n       window.location.href = response.data.paymentUrl;\r\n+      \r\n     } catch (err) {\r\n-      setError(err.response?.data?.message || 'Payment failed. Please try again.');\r\n+      setError(err.response?.data?.error || 'Payment failed. Please try again.');\r\n     } finally {\r\n       setLoading(false);\r\n     }\r\n   };\r\n@@ -80,18 +85,32 @@\n           />\r\n         </div>\r\n \r\n         <div className=\"label\">\r\n+          <span className=\"title\">Email</span>\r\n+          <input\r\n+            className=\"input-field\"\r\n+            type=\"email\"\r\n+            name=\"email\"\r\n+            value={formData.email}\r\n+            onChange={handleChange}\r\n+            placeholder=\"your@email.com\"\r\n+            required\r\n+            title=\"Enter your email for payment receipt\"\r\n+          />\r\n+        </div>\r\n+\r\n+        {/* Card fields (PayFast doesn't need these but you might want to keep them) */}\r\n+        <div className=\"label\">\r\n           <span className=\"title\">Card Number</span>\r\n           <input\r\n             className=\"input-field\"\r\n             type=\"text\"\r\n             name=\"cardNumber\"\r\n             value={formData.cardNumber}\r\n             onChange={handleChange}\r\n             placeholder=\"\"\r\n-            required\r\n-            title=\"Enter your 16-digit card number without spaces\"\r\n+            title=\"Card information is not stored or processed by us\"\r\n           />\r\n         </div>\r\n \r\n         <div className=\"split\">\r\n@@ -103,10 +122,9 @@\n               name=\"expiry\"\r\n               value={formData.expiry}\r\n               onChange={handleChange}\r\n               placeholder=\"MM/YY\"\r\n-              required\r\n-              title=\"Enter expiration date in MM/YY format (e.g., 12/25)\"\r\n+              title=\"Card information is not stored or processed by us\"\r\n             />\r\n           </div>\r\n \r\n           <div className=\"label\">\r\n@@ -117,10 +135,9 @@\n               name=\"cvv\"\r\n               value={formData.cvv}\r\n               onChange={handleChange}\r\n               placeholder=\"\"\r\n-              required\r\n-              title=\"Enter the 3-digit security code on the back of your card\"\r\n+              title=\"Card information is not stored or processed by us\"\r\n             />\r\n           </div>\r\n         </div>\r\n \r\n@@ -131,9 +148,9 @@\n             type=\"number\"\r\n             name=\"amount\"\r\n             value={formData.amount}\r\n             onChange={handleChange}\r\n-            placeholder=\"\"\r\n+            placeholder=\"200.00\"\r\n             min=\"200\"\r\n             step=\"0.01\"\r\n             required\r\n             title=\"Minimum payment amount is R200\"\r\n"
                }
            ],
            "date": 1754816982164,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst PaymentForm = () => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    cardNumber: '',\r\n    expiry: '',\r\n    cvv: '',\r\n    amount: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      // Send payment data to your backend\r\n      const response = await axios.post('http://your-backend-api/payfast/initiate', {\r\n        amount: formData.amount,\r\n        customer_name: formData.name,\r\n        // Other necessary fields for PayFast\r\n      });\r\n\r\n      // Redirect to PayFast payment page\r\n      window.location.href = response.data.paymentUrl;\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Payment failed. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form\">\r\n      <h2 style={{ color: '#fff', textAlign: 'center' }}>Payment Details</h2>\r\n      \r\n      {error && <div style={{ color: '#ff6b6b', textAlign: 'center' }}>{error}</div>}\r\n      {success && <div style={{ color: '#4caf50', textAlign: 'center' }}>{success}</div>}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"label\">\r\n          <span className=\"title\">Cardholder Name</span>\r\n          <input\r\n            className=\"input-field\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            placeholder=\"John Doe\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"label\">\r\n          <span className=\"title\">Card Number</span>\r\n          <input\r\n            className=\"input-field\"\r\n            type=\"text\"\r\n            name=\"cardNumber\"\r\n            value={formData.cardNumber}\r\n            onChange={handleChange}\r\n            placeholder=\"1234 5678 9012 3456\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"split\">\r\n          <div className=\"label\">\r\n            <span className=\"title\">Expiry Date</span>\r\n            <input\r\n              className=\"input-field\"\r\n              type=\"text\"\r\n              name=\"expiry\"\r\n              value={formData.expiry}\r\n              onChange={handleChange}\r\n              placeholder=\"MM/YY\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"label\">\r\n            <span className=\"title\">CVV</span>\r\n            <input\r\n              className=\"input-field\"\r\n              type=\"text\"\r\n              name=\"cvv\"\r\n              value={formData.cvv}\r\n              onChange={handleChange}\r\n              placeholder=\"123\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"label\">\r\n          <span className=\"title\">Amount (ZAR)</span>\r\n          <input\r\n            className=\"input-field\"\r\n            type=\"number\"\r\n            name=\"amount\"\r\n            value={formData.amount}\r\n            onChange={handleChange}\r\n            placeholder=\"100.00\"\r\n            min=\"1\"\r\n            step=\"0.01\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <button className=\"checkout-btn\" type=\"submit\" disabled={loading}>\r\n          {loading ? 'Processing...' : 'Pay via PayFast'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentForm;"
        }
    ]
}